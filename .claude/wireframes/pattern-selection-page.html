<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Selection - ComponentForge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
        .transition-all { transition: all 0.2s ease; }
        .focus-ring:focus { outline: 2px solid #3B82F6; outline-offset: 2px; }
        .hover-effect:hover { opacity: 0.9; transform: scale(0.995); }
        
        .pattern-card {
            transition: all 0.3s ease;
        }
        
        .pattern-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .selected-card {
            border-color: #3B82F6;
            background-color: #EFF6FF;
        }
        
        .score-bar {
            background: linear-gradient(90deg, #10B981 0%, #10B981 var(--score), #E5E7EB var(--score));
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-content {
            animation: slideIn 0.2s ease;
        }
        
        .code-container {
            background: #1E293B;
            color: #E2E8F0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .tab-active {
            border-bottom: 2px solid #3B82F6;
            color: #3B82F6;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    </style>
</head>
<body class="bg-white text-gray-900">
    <!-- Header -->
    <header class="border-b border-gray-200 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">CF</span>
                    </div>
                    <span class="font-semibold text-lg">ComponentForge</span>
                </div>
                <nav class="flex items-center gap-4">
                    <button class="text-gray-600 hover:text-gray-900 transition-colors focus-ring px-3 py-2 rounded-md">
                        Settings
                    </button>
                    <button class="text-gray-600 hover:text-gray-900 transition-colors focus-ring px-3 py-2 rounded-md">
                        Profile
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <button class="text-gray-600 hover:text-gray-900 mb-4 flex items-center gap-2 focus-ring px-2 py-1 rounded">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                </svg>
                Back
            </button>
            <h1 class="text-2xl font-bold">Pattern Match Results</h1>
        </div>

        <!-- Retrieval Summary -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
            <h2 class="font-semibold mb-3 flex items-center gap-2">
                <span>üîç</span>
                Ensemble Retrieval Pipeline
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <p class="text-gray-600">Methods:</p>
                    <p class="font-medium">BM25 + Semantic + Diversity (MMR) + RRF Fusion + Cross-encoder Rerank</p>
                </div>
                <div>
                    <p class="text-gray-600">Performance:</p>
                    <p class="font-medium">‚è±Ô∏è Completed in 4.2s (target: &lt;5s)</p>
                </div>
                <div>
                    <p class="text-gray-600">Query:</p>
                    <p class="font-medium">üìä Button component with variants</p>
                </div>
                <div>
                    <p class="text-gray-600">Corpus:</p>
                    <p class="font-medium">üìö Searched: 12 shadcn/ui patterns</p>
                </div>
            </div>
        </div>

        <h2 class="text-lg font-semibold mb-4">TOP 3 PATTERN MATCHES</h2>

        <!-- Pattern 1 - Selected -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-3">
                <span class="text-2xl font-bold">1Ô∏è‚É£</span>
                <span class="px-3 py-1 bg-blue-500 text-white rounded-full text-sm font-medium">SELECTED</span>
                <h3 class="font-semibold">shadcn/ui Button (v2.1.0)</h3>
                <span class="text-2xl font-bold text-green-600">0.94</span>
            </div>
            <div id="pattern-1" class="pattern-card border-2 border-blue-500 rounded-lg p-6 selected-card">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">üìä</span>
                        <span class="font-medium">Match Score: 0.94</span>
                        <span class="text-sm text-gray-500">(threshold: ‚â•0.8)</span>
                    </div>
                    <div class="w-48 h-2 bg-gray-200 rounded-full score-bar" style="--score: 94%"></div>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">üìù Why this pattern?</h4>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Exact variant match (primary/secondary/ghost)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Size variants included (sm/md/lg)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>ARIA compliant + focus management</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Hover/active/disabled states</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Uses Radix UI Slot primitive</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-gray-50 rounded-lg p-4 mb-4">
                    <h4 class="font-medium mb-2">üè∑Ô∏è Metadata:</h4>
                    <ul class="space-y-1 text-sm">
                        <li>‚Ä¢ Pattern ID: button-2.1.0</li>
                        <li>‚Ä¢ Dependencies: @radix-ui/react-slot</li>
                        <li>‚Ä¢ Props: variant, size, disabled, asChild</li>
                    </ul>
                </div>

                <div class="flex gap-3">
                    <button onclick="openPreviewModal('pattern-1')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                        üëÅÔ∏è Preview Code
                    </button>
                    <button onclick="selectPattern('pattern-1')" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors focus-ring hover-effect font-medium">
                        ‚úì Select This Pattern
                    </button>
                </div>
            </div>
        </div>

        <!-- Pattern 2 -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-3">
                <span class="text-2xl font-bold">2Ô∏è‚É£</span>
                <h3 class="font-semibold">shadcn/ui Button Outline (v2.0.8)</h3>
                <span class="text-2xl font-bold text-yellow-600">0.81</span>
            </div>
            <div id="pattern-2" class="pattern-card border border-gray-200 rounded-lg p-6 hover:border-gray-300">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">üìä</span>
                        <span class="font-medium">Match Score: 0.81</span>
                    </div>
                    <div class="w-48 h-2 bg-gray-200 rounded-full score-bar" style="--score: 81%"></div>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">üìù Why this pattern?</h4>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Similar Tailwind styling approach</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Good accessibility baseline</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-500 mt-0.5">‚ö†Ô∏è</span>
                            <span>Missing ghost variant</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-500 mt-0.5">‚ö†Ô∏è</span>
                            <span>Older version (consider updating)</span>
                        </li>
                    </ul>
                </div>

                <div class="flex gap-3">
                    <button onclick="openPreviewModal('pattern-2')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                        üëÅÔ∏è Preview Code
                    </button>
                    <button onclick="selectPattern('pattern-2')" class="flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors focus-ring font-medium">
                        Select This Pattern
                    </button>
                </div>
            </div>
        </div>

        <!-- Pattern 3 -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-3">
                <span class="text-2xl font-bold">3Ô∏è‚É£</span>
                <h3 class="font-semibold">Radix UI Button Primitive (v1.0.3)</h3>
                <span class="text-2xl font-bold text-yellow-600">0.76</span>
            </div>
            <div id="pattern-3" class="pattern-card border border-gray-200 rounded-lg p-6 hover:border-gray-300">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">üìä</span>
                        <span class="font-medium">Match Score: 0.76</span>
                    </div>
                    <div class="w-48 h-2 bg-gray-200 rounded-full score-bar" style="--score: 76%"></div>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">üìù Why this pattern?</h4>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-0.5">‚úì</span>
                            <span>Excellent a11y foundation (Radix)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-500 mt-0.5">‚ö†Ô∏è</span>
                            <span>Low-level primitive, needs styling</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-500 mt-0.5">‚ö†Ô∏è</span>
                            <span>Manual variant implementation needed</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-500 mt-0.5">‚ÑπÔ∏è</span>
                            <span>Good for custom design systems</span>
                        </li>
                    </ul>
                </div>

                <div class="flex gap-3">
                    <button onclick="openPreviewModal('pattern-3')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                        üëÅÔ∏è Preview Code
                    </button>
                    <button onclick="selectPattern('pattern-3')" class="flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors focus-ring font-medium">
                        Select This Pattern
                    </button>
                </div>
            </div>
        </div>

        <!-- Retrieval Metrics -->
        <div class="bg-gray-50 rounded-lg p-6 mb-6">
            <h3 class="font-semibold mb-4">üìà RETRIEVAL METRICS (This Query)</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div>
                    <p class="text-gray-600">MRR:</p>
                    <p class="font-medium">1.0 (rank 1 correct)</p>
                </div>
                <div>
                    <p class="text-gray-600">Hit@3:</p>
                    <p class="font-medium text-green-600">‚úÖ (target in top 3)</p>
                </div>
                <div>
                    <p class="text-gray-600">Average MRR:</p>
                    <p class="font-medium">0.87 (target: ‚â•0.83)</p>
                </div>
                <div>
                    <p class="text-gray-600">Average Hit@3:</p>
                    <p class="font-medium">0.93 (target: ‚â•0.91)</p>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex gap-3">
            <button onclick="runAblation()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                Run Ablation Study
            </button>
            <button onclick="viewFullScores()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                View Full Scores
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                ‚Üê Back to Requirements
            </button>
            <button onclick="continueWithSelected()" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors focus-ring hover-effect font-medium">
                Continue with Selected ‚Üí
            </button>
        </div>
    </main>

    <!-- Code Preview Modal -->
    <div id="preview-modal" class="fixed inset-0 modal-backdrop hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full modal-content max-h-[90vh] overflow-hidden">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold">Pattern Preview: shadcn/ui Button v2.1.0</h2>
                        <button onclick="closePreviewModal()" class="text-gray-400 hover:text-gray-600 focus-ring p-1 rounded">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Tabs -->
                    <div class="flex gap-4 border-b mb-4">
                        <button onclick="switchPreviewTab('code')" id="code-tab" class="pb-2 px-1 font-medium tab-active focus-ring">
                            Code
                        </button>
                        <button onclick="switchPreviewTab('visual')" id="visual-tab" class="pb-2 px-1 font-medium text-gray-600 hover:text-gray-900 focus-ring">
                            Visual Preview
                        </button>
                        <button onclick="switchPreviewTab('metadata')" id="metadata-tab" class="pb-2 px-1 font-medium text-gray-600 hover:text-gray-900 focus-ring">
                            Metadata
                        </button>
                    </div>

                    <!-- Code Panel -->
                    <div id="code-panel" class="overflow-y-auto max-h-[60vh]">
                        <div class="code-container rounded-lg p-4 overflow-x-auto">
                            <pre><code>import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",
  {
    variants: {
      variant: {
        primary: "bg-primary text-primary-foreground hover:bg-primary/90",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground"
      },
      size: {
        sm: "h-9 px-3",
        md: "h-10 px-4 py-2",
        lg: "h-11 px-8"
      }
    },
    defaultVariants: {
      variant: "primary",
      size: "md"
    }
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,
    VariantProps&lt;typeof buttonVariants&gt; {
  asChild?: boolean
}

const Button = React.forwardRef&lt;HTMLButtonElement, ButtonProps&gt;(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      &lt;Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      /&gt;
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }</code></pre>
                        </div>
                    </div>

                    <!-- Visual Preview Panel -->
                    <div id="visual-panel" class="hidden">
                        <div class="border rounded-lg p-8 bg-gray-50">
                            <div class="space-y-4">
                                <div class="flex gap-3">
                                    <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-medium">
                                        Primary Button
                                    </button>
                                    <button class="px-4 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300 font-medium">
                                        Secondary Button
                                    </button>
                                    <button class="px-4 py-2 text-gray-900 rounded-md hover:bg-gray-100 font-medium">
                                        Ghost Button
                                    </button>
                                </div>
                                <div class="flex gap-3">
                                    <button class="px-3 py-1.5 bg-blue-500 text-white rounded-md text-sm hover:bg-blue-600 font-medium">
                                        Small
                                    </button>
                                    <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 font-medium">
                                        Medium
                                    </button>
                                    <button class="px-8 py-3 bg-blue-500 text-white rounded-md text-lg hover:bg-blue-600 font-medium">
                                        Large
                                    </button>
                                </div>
                                <div>
                                    <button class="px-4 py-2 bg-blue-500 text-white rounded-md opacity-50 cursor-not-allowed font-medium" disabled>
                                        Disabled Button
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Metadata Panel -->
                    <div id="metadata-panel" class="hidden">
                        <div class="space-y-4">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-medium mb-2">Pattern Information</h4>
                                <ul class="space-y-2 text-sm">
                                    <li><span class="font-medium">Source:</span> shadcn/ui official library</li>
                                    <li><span class="font-medium">Last updated:</span> 2024-09-15</li>
                                    <li><span class="font-medium">Used in:</span> 234 projects</li>
                                    <li><span class="font-medium">Version:</span> 2.1.0</li>
                                    <li><span class="font-medium">License:</span> MIT</li>
                                </ul>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-medium mb-2">Dependencies</h4>
                                <ul class="space-y-1 text-sm font-mono">
                                    <li>@radix-ui/react-slot: ^1.0.2</li>
                                    <li>class-variance-authority: ^0.7.0</li>
                                    <li>clsx: ^2.0.0</li>
                                    <li>tailwind-merge: ^1.14.0</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button onclick="copyCode()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                            Copy Code
                        </button>
                        <button onclick="selectAndContinue()" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors focus-ring hover-effect font-medium">
                            Select & Continue
                        </button>
                        <button onclick="closePreviewModal()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors focus-ring font-medium">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedPattern = 'pattern-1';

        function selectPattern(patternId) {
            // Remove previous selection
            document.querySelectorAll('.pattern-card').forEach(card => {
                card.classList.remove('selected-card', 'border-blue-500', 'border-2');
                card.classList.add('border-gray-200', 'border');
            });
            
            // Add selection to new pattern
            const card = document.getElementById(patternId);
            card.classList.remove('border-gray-200', 'border');
            card.classList.add('selected-card', 'border-blue-500', 'border-2');
            selectedPattern = patternId;
            
            showToast('Pattern selected');
        }

        function openPreviewModal(patternId) {
            document.getElementById('preview-modal').classList.remove('hidden');
        }

        function closePreviewModal() {
            document.getElementById('preview-modal').classList.add('hidden');
        }

        function switchPreviewTab(tab) {
            // Update tabs
            document.querySelectorAll('[id$="-tab"]').forEach(tabEl => {
                tabEl.classList.remove('tab-active');
                tabEl.classList.add('text-gray-600');
            });
            document.getElementById(tab + '-tab').classList.add('tab-active');
            document.getElementById(tab + '-tab').classList.remove('text-gray-600');
            
            // Update panels
            document.querySelectorAll('[id$="-panel"]').forEach(panel => {
                panel.classList.add('hidden');
            });
            document.getElementById(tab + '-panel').classList.remove('hidden');
        }

        function copyCode() {
            // In a real app, copy to clipboard
            showToast('Code copied to clipboard!');
        }

        function selectAndContinue() {
            closePreviewModal();
            continueWithSelected();
        }

        function continueWithSelected() {
            showToast('Proceeding with selected pattern...');
            // Navigate to next page
        }

        function runAblation() {
            showToast('Running ablation study...');
        }

        function viewFullScores() {
            showToast('Loading full scores...');
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
    </script>
</body>
</html>